@model List<SuiPOS.ViewComponents.MenuItem>

<!-- Sidebar with toggle -->
<aside id="sidebar" class="fixed left-0 top-0 h-screen bg-[#edeff2] border-r border-2 shadow-xl z-50 transition-all duration-300" style="width: 70px;">
    <!-- Logo & Toggle Button -->
    <div class="flex items-center justify-between p-4 border-gray-200">
        <div id="sidebar-logo" class="flex items-center gap-3 sidebar-content" style="display: none; opacity: 0;">
            <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center flex-shrink-0">
                <i class="fas fa-tag text-white text-xl"></i>
            </div>
            <h1 class="text-xl font-bold text-blue-600 whitespace-nowrap">SuiPOS</h1>
        </div>

        <!-- Menu Icon khi collapsed - ẨN mặc định -->
        <button id="menu-icon-collapsed" onclick="toggleSidebar()" class="p-2 hover:bg-gray-100 rounded-lg transition flex-shrink-0">
            <i class="fas fa-bars text-gray-600 text-xl"></i>
        </button>
        
        <!-- Toggle button - ẨN khi collapsed -->
        <button id="toggle-btn-expanded" onclick="toggleSidebar()" class="hidden p-2 hover:bg-gray-100 rounded-lg transition flex-shrink-0">
            <i class="fas fa-angle-double-left text-gray-600"></i>
        </button>
    </div>

    <!-- Menu Items -->
    <nav class="p-3 space-y-1">
        @foreach (var item in Model)
        {
            <a href="@item.Url" 
               class="flex items-center gap-3 px-3 py-3 rounded-xl transition-all duration-200 group @(item.IsActive ? "bg-blue-50 text-blue-600" : "text-gray-700 hover:bg-gray-50")">
                
                <div class="flex-shrink-0 w-6 text-center">
                    @if (item.Icon == "shopping-cart")
                    {
                        <i class="fas fa-shopping-cart text-lg @(item.IsActive ? "text-blue-600" : "text-gray-500")"></i>
                    }
                    else if (item.Icon == "receipt")
                    {
                        <i class="fas fa-receipt text-lg @(item.IsActive ? "text-blue-600" : "text-gray-500")"></i>
                    }
                    else if (item.Icon == "product")
                    {
                        <i class="fas fa-box text-lg @(item.IsActive ? "text-blue-600" : "text-gray-500")"></i>
                    }
                    else if (item.Icon == "customer")
                    {
                        <i class="fas fa-user text-lg @(item.IsActive ? "text-blue-600" : "text-gray-500")"></i>
                    }
                    else if (item.Icon == "settings")
                    {
                        <i class="fas fa-cog text-lg @(item.IsActive ? "text-blue-600" : "text-gray-500")"></i>
                    }
                    else if (item.Icon == "chart-bar")
                    {
                        <i class="fas fa-chart-bar text-lg @(item.IsActive ? "text-blue-600" : "text-gray-500")"></i>
                    }
                </div>

                <span class="font-medium sidebar-content whitespace-nowrap" style="display: none; opacity: 0;">@item.Name</span>
            </a>
        }
    </nav>
</aside>

<script>
    let sidebarExpanded = false; // Mặc định là collapsed

    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const sidebarContents = document.querySelectorAll('.sidebar-content');
        const menuIconCollapsed = document.getElementById('menu-icon-collapsed');
        const toggleBtnExpanded = document.getElementById('toggle-btn-expanded');
        const logoIconCollapsed = document.getElementById('logo-icon-collapsed');
        
        sidebarExpanded = !sidebarExpanded;
        
        if (sidebarExpanded) {
            // Mở sidebar - HIỂN THỊ logo & text, ẨN logo icon
            sidebar.style.width = '280px';
            mainContent.style.marginLeft = '280px';
            sidebarContents.forEach(el => {
                el.style.display = 'flex';
                setTimeout(() => el.style.opacity = '1', 10);
            });
            menuIconCollapsed.classList.add('hidden');
            toggleBtnExpanded.classList.remove('hidden');
            logoIconCollapsed.style.display = 'none';
        } else {
            // Thu sidebar - ẨN logo & text, HIỂN THỊ logo icon
            sidebar.style.width = '70px';
            mainContent.style.marginLeft = '70px';
            sidebarContents.forEach(el => {
                el.style.opacity = '0';
                setTimeout(() => el.style.display = 'none', 300);
            });
            menuIconCollapsed.classList.remove('hidden');
            toggleBtnExpanded.classList.add('hidden');
            logoIconCollapsed.style.display = 'flex';
        }
    }
</script>

